#Video analytics

Κωνσταντίνος Παρδάλης

ΑΜ: Π2011026

*(αντίστοιχα και τα στοιχεία των υπολοίπων των μελών της ομάδας σε περίπτωση ομαδικής εργασίας)*


##Παραδοτέο 1
###(Πρόοδος)

* Εναλλακτικές εμφανίσεις του video player.

* Εγγραφή στην πλατφόρμα μέσω μίας φόρμας.




##Παραδοτέο 2
###((Παρουσίαση πρωτοτύπου της εφαρμογής)

Προσθήκη επιπλέον κουμπιών στον player τα οποία μπορεί ο χρήστης να επιλέξει αν θέλει να εμφανίζονται η όχι. Αυτό γίνεται μέσω μία φόρμας στη σελίδα που μπορεί ο διαχειριστής να επεξεργαστεί τα βίντεο του.
Για την υλοποίηση και του σχεδιασμό του player χρησιμοποιήθηκε jquery ui και για την υλοποίηση της φόρμας jquery mobile.

![Image](https://github.com/courses-ionio/mm/blob/master/projects_2016/%25CE%25A02012000/player1.jpg)

![Image](https://github.com/courses-ionio/mm/blob/master/projects_2016/%25CE%25A02012000/player2.jpg)

![Image](https://github.com/courses-ionio/mm/blob/master/projects_2016/%25CE%25A02012000/form.jpg)



##Παραδοτέο 3
###((Τελική παρουσίαση)

* Δημιουργία του player με HTML5 canvas χρησιμοποιώντας τη βιβλιοθήκη jCanvas.

* Επιλογή χρωμάτων player μέσα από τη φόρμα με εύκολο τρόπο διαλέγοντας το χρώμα μέσα από μία παλέτα χρωμάτων κάνοντας απλά ένα κλικ. Αυτό υλοποιήθηκε με τη βοήθεια της βιβλιοθήλης JSColor.

* Προσθήκη δύο skin.

* Εμφάνιση χρόνου όταν ο δείκτης του ποντικιού περνάει πάνω από την μπάρα.

* Δυνατότητα Video preview όταν ο χρήστης κάνει κλικ πάνω στην περιγραφη του βίντεο.

* Προσθήκη κουμπιών για download των δεδομένων.

![Image](https://github.com/courses-ionio/mm/blob/master/projects_2016/%25CE%25A02012000/4.jpg)

![Image](https://github.com/courses-ionio/mm/blob/master/projects_2016/%25CE%25A02012000/5.jpg)

![Image](https://github.com/courses-ionio/mm/blob/master/projects_2016/%25CE%25A02012000/6.jpg)

![Image](https://github.com/courses-ionio/mm/blob/master/projects_2016/%25CE%25A02012000/7.jpg)

![Image](https://github.com/courses-ionio/mm/blob/master/projects_2016/%25CE%25A02012000/8.jpg)



##Tελική Αναφορά

**Σύνοψη**

To Video Analytics είναι μία διαδικτυακή εφαρμογή που καταγράφει σε πραγματικό χρόνο τις διαδράσεις των χρηστών που γίνονται πάνω σε έναν online video player.


**Εισαγωγή**

Σκοπός της εργασίας είναι να δημιουργηθεί μία εφαρμογή με την οποία ένας χρήστης μπορεί να ενσωματώνει στην ιστοσελίδα του ένα βίντεο από το YouTube χρησιμοποιώντας έναν διαφορετικό video player τον οποίο να μπορεί να προσαρμόσει κατάλληλα στις ανάγκες του. Επιπλέον, να μπορεί να παρακολουθεί την δραστηριότητα των χρηστών πάνω στο βίντεο. Τέλος, η ανάπτυξη του Video Analytics βασίστηκε σε ήδη υπάρχον κώδικα ο οποίος βρίσκεται στο github (https://github.com/ssagiadin/videoanalytics).

Το Video Analytics δίνει τη δυνατότητα στο χρήστη να επιλέξει το βίντεο που επιθυμεί από το Youtube, να προσαρμόσει κατάλληλα στις ανάγκες του τον video player και τέλος να ενσωματώσει το βίντεο στην ιστοσελίδα του. Από κι έπειτα, μπορεί να παρακολουθεί την δραστηριότητα των χρηστών πάνω στο βίντεο μέσα από το γράφημα που παρέχει η εφαρμογή ή κατεβάζοντας τα δεδομένα που περιέχουν τις διαδράσεις των χρηστών για περαιτέρω ανάλυση.


**Επιλογή εργαλείων**

Για περιβάλλον ανάπτυξης χρησιμοποιήθηκε το Eclipse IDE for Java EE Developers πάνω στο οποίο εγκαταστήθηκε το Google Plugin for Eclipse και το appengine-java-sdk-1.6.3. Για server-side scripting language χρησιμοποιήθηκε η γλώσσα προγραμματισμου Java. Για την υλοποίηση του frontend της εφαρμογής πέρα από τα βασικά HTML και CSS, χρησιμοποιήθηκε η βιβλιοθήκη JQuery για γρήγορη αναπτυξη και για εύκολη διαχείρηση των events και AJAX ερωτηματων. Επίσης, χρησιμοποιήθηκε η βιβλιοθήκη JQuery Mobile για responsive design ώστε η εφαρμογή να είναι συμβατή με smartphones και tablet. Επιπλέον, χρησιμοποιήθηκε η βιβλιοθήκη JSCcolor η οποία προσφέρει έναν επιλογέα χρωμάτων από μία παλέτα χρωμάτων και επίσης χρησιμοποιήθηκε η βιβλιοθήκη jCanvas για εύκολη ανάπτυξη και διαχειρηση του HTML5 canvas. Για την αποθήκευση των δεδομένων χρησιμοποίηθηκαν Google Fusion Tables και για την δημιουργία διαγραμμάτων Google Charts. Τέλος, το hosting της εφαρμογής έγινε στο Google AppEngine.


**Διαδικασία ανάπτυξης**

Όπως αναφέρθηκε και παραπάνω για περιβάλλον ανάπτυξης χρησιμοποιήθηκε το Eclipse IDE for Java EE Developers στο οποίο εγκαταστήθηκε το Google Plugin for Eclipse και το appengine-java-sdk-1.6.3. Στη συνέχεια, έκανα εισαγωγή τον υπάρχον κώδικα στο Eclipse. Δημιουργησα τους απαραίτητους πίνακες στο Google Fusion Tables και με κάποιες μικροαλλαγές η εφαρμογή δούλεψε σωστά. Αρχικά, αυτό που πρόσθεσα στην εφαρμογή ήταν μία φόρμα εγγραφής στην οποία ο χρήστης δίνει το gmail και το ονομά και αυτά τα δεδομένα ελέγχονται για την ορθοτητα τους(π.χ αν όντως έδωσε gmail) μέσω Javascript στον client και στο server με τη Java και αν είναι λανθασμένα  εμφανίζεται ένα warning στο χρήστη για το πεδίο της φόρμας που είναι λανθασμένο.

Συνεχίζοντας, άρχισα να προσθέτω κουμπιά στον video player. Αυτό έγινε χρησιμοποιώντας τη βιβλιοθήκη JQuery UI, με την οποία ήταν ήδη σχεδιασμένος ο υπάρχον player, και με την χρήση του YouTube JavaScript Player API. Τα επιπλέον κουμπιά που πρόσθεσα είναι Volume, Quality, Playback rate, Fullscreen και έκανα κάποιες διορθώσεις στα προηγούμενα. Επίσης, τροποποιήθηκε κατάλληλα η φόρμα για την επιλογή των κουμπιών. Στη συνέχεια, για να γίνει ο player προσαρμόσιμος στις ανάγκες κάθε χρήστη έπρεπε να σχεδιαστεί με διαφορετικό τρόπο, κάτι το οποίο δεν γινόταν με τη JQuery UI, και γι αυτό τον ξανα σχεδίασα με HTML5 Canvas χρησιμοποιώντας τη βιβλιοθήκη jCanvas για την σχεδίαση των κουμπιών και με απλή HTML και CSS για τα υπόλοιπα μέρη (π.χ η μπάρα, ο χρόνος όταν είναι ο δείκτης στη μπάρα). Μετά τροποποίησα κατάλληλα τη φόρμα εισαγωγής νέου βίντεου προσθέτοντας έναν επιλογέα χρώματος, χρησιμοποιώντας την βιβλιοθήκη JSCcolor, ώστε να μπορεί ο χρήστης να επιλέγει εύκολα τα χρώματα του player μέσα από μία παλέτα χρωμάτων. Επιπλέον, πρόσθεσα δύο διαφορετικά skin για να έχει ο χρήστης την δυνατότητα δύο επιλογών εμφάνισης. Τέλος, πρόσθεσα την επιλογή για download των δεδομένων για όλες τις διαδράσεις και την επιλογή για download των δεδομένων του διαγράμματος, δηλαδή της χρονοσειράς.


**Αναλυτική περιγραφή**

Με την είσοδο στην αρχική σελίδα της εφαρμογής (http://webvideoanalytics.appspot.com) ο χρήστης έχει δύο επιλογές, να κάνει είσοδο με τον λογαρισμό του google αν είναι ήδη εγγεγραμμένος ή να κάνει εγγραφή μέσω μία φόρμας καταχωρώντας το gmail και το όνομά του. Από εκεί κι έπειτα μπορεί να επιλέξει την επιλογή προσθήκης βίντεο. Από τη στιγμή που πάτησε προσθήκη θα ανοίξει μία φόρμα στην οποία πρέπει να εκχωρήσει μία περιγραφή, το url του βίντεο από το YouTube, να επιλέξει ποια κουμπιά (Play/Pause, Volume, Quality, Playback rate και Fullscreen) θέλει να εμφανίζονται στον video player και στη συνέχεια να εκχωρήσει το ύψος και πλατός του βίντεο. Στη συνέχεια, υπάρχουν κάποιες κρυμμένες επιλογές τις οποίες μπορεί να εμφανίσει για να προσαρμόσει τον video player, πιο συγκεκριμένα να επιλέξει ένα από τα διαθέσιμα skin και να αλλάξει το χρώμα των κουμπιών, της μπάρας και του φόντου.

Απο τη στιγμή που ο χρήστης πρόσθεσε κάποιο βίντεο, μπορεί πατώντας το κουμπί Embed και διαβάζοντας τις οδηγίες να ενσωματώσει το βίντεο στην ιστοσελίδα του. Αξίζει να αναφερθεί ότι μπορεί στην ίδια σελίδα να ενσωματώσει περισσότερα από ένα βίντεο τα οποία καθένα να έχει διαφορετικό skin και χρώματα και να παίζουν ταυτόχρονα. Στη συνέχεια, μπορεί να δει την δραστηριότητα των χρηστών πάνω στο βίντεο από το διάγραμμα της χρονοσειράς που παρέχει το σύστημα και επίσης μπορεί να κατεβάσει τα δεδομένα(σε αρχείο CSV) με τα οποία σχηματίστηκε η χρονοσειρα. Τα δεδομένα που εμφανίζονται στο διάγραμμα περιλαμβάνουν όλο το διάστημα από το skip που έκανε ο χρήστης με τη μπάρα. Επίσης, σε κάθε δευτερόλεπτο για κάθε forward ο μετρητής μειώνεται κατα 2, ενώ για κάθε backward αυξάνεται κατα 2. Συνεχίζοντας, μπορεί να κατεβάσει τα δεδομένα με τις διαδράσεις των χρηστών σε αρχείο CSV το οποίο περιέχει το είδος, τη χρονική στιγμή του βίντεο και την ημερομηνια και ώρα της διάδρασης. 

**Διάγραμμα λειτουργίας**
![Image](https://github.com/courses-ionio/mm/blob/master/projects_2016/%25CE%25A02012000/videoanalytics.png)

**Ενδεικτικές οθόνες**

![Image](https://github.com/courses-ionio/mm/blob/master/projects_2016/%25CE%25A02012000/9.jpg)
![Image](https://github.com/courses-ionio/mm/blob/master/projects_2016/%25CE%25A02012000/10.jpg)
![Image](https://github.com/courses-ionio/mm/blob/master/projects_2016/%25CE%25A02012000/11.jpg)
![Image](https://github.com/courses-ionio/mm/blob/master/projects_2016/%25CE%25A02012000/12.jpg)
![Image](https://github.com/courses-ionio/mm/blob/master/projects_2016/%25CE%25A02012000/13.jpg)
![Image](https://github.com/courses-ionio/mm/blob/master/projects_2016/%25CE%25A02012000/14.jpg)
![Image](https://github.com/courses-ionio/mm/blob/master/projects_2016/%25CE%25A02012000/15.jpg)
![Image](https://github.com/courses-ionio/mm/blob/master/projects_2016/%25CE%25A02012000/16.jpg)
![Image](https://github.com/courses-ionio/mm/blob/master/projects_2016/%25CE%25A02012000/17.jpg)


**Μελλοντική δουλειά**

* Ανέβασμα στο github
* Βελτιώση του video player (π.χ να δίνεται στο χρήστη η δυνατότητα για μεγέθυνση/σμίκρυνση των κουμπιών, προσθήκη περισσότερων skin) όπως [εδώ](http://www.google.com/url?q=http%3A%2F%2Fflowplayer.org%2Fdocs%2Fskinning.html&sa=D&sntz=1&usg=AFQjCNEf-MmMIFeWKleJQa6ri3vp9syMkg)
* Αποθήκευση δεδομένων σε Fusion Τable του χρήστη, ώστε να υπάρχει ιδιωτικότητα
* Ολοκλήρωση (system integration) των βασικών δυνατοτήτων του VideoAnalytics (code embedding, custom buttons, private tables) με το σύστημα SocialSkip έτσι ώστε οι ερευνητές να μπορούν να κάνουν πειράματα σε όποια σελίδα θέλουν, με όποια κουμπιά θέλουν, και να κρατάνε ιδιωτικά τα δεδομένα τους
* Ολοκλήρωση με google analytics (όπως [εδώ](https://code.google.com/p/ga-youtube-tracker/wiki/HowToTrackEmbeddedYoutubeWithGoogleAnalytics) και [εδώ](http://www.google.com/url?q=http%3A%2F%2Fwww.lunametrics.com%2Fblog%2F2012%2F10%2F22%2Fautomatically-track-youtube-videos-events-google-analytics%2F%23sr%3Dd%26m%3Dn%26cp%3Dd%26ct%3D-tmc%26ts%3D1390578793&sa=D&sntz=1&usg=AFQjCNFc84tTeLObdKWm1vguf3QhtIFFKg))

**Συμπεράσματα**

Δεν υπήρξε κάποιο μη επιλύσιμο πρόβλημα με την υλοποίηση της εφαρμογής. Τα προβλήματα ήταν μικρά και προερχόταν από υπηρεσίες τρίτων που χρησιμοποιούνται, όπως π.χ ο youtube player δεν γινόταν chromeless για κάποιο χρονικό διάστημα. Επίσης, δεν υπήρχαν χρήστες στην εφαρμογή που να έχουν ενσωματώσει κάποιο βίντεο στη σελίδα τους ώστε να έχουμε κάποιο feedback για να διορθωθούν τυχόν προβλήματα που θα αντιμετώπιζαν. Το μόνο που έγινε είναι ότι έβαλα λίγα άτομα να δοκιμάσουν την εφαρμογή ώστε να δω αν μπορούν να βρουν όλες τις λειτουργίες που πρόσθεσα μέσα από το γραφικό περιβάλλον.
